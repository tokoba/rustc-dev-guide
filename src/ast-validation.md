# AST 検証

_AST 検証_は、ツリー内の各アイテムを訪問し、簡単なチェックを実行する別個の AST パスです。このパスは、複雑な解析、型チェック、名前解決を実行しません。

検証を実行する前に、コンパイラはまずマクロを展開します。次に、このパスは各 AST アイテムが正しい状態にあることを確認するための検証を実行します。そして、このパスが完了すると、コンパイラはクレート解決パスを実行します。

## 検証

検証は `AstValidator` 型で定義されており、
これ自体は `rustc_ast_passes` クレートに配置されています。この
型は、特定の言語ルールが破られたときにエラーを出力する様々な簡単なチェックを実装しています。

さらに、`AstValidator` は `Visitor` トレイトを実装しており、
これは AST アイテム（関数、トレイト、列挙型など）を訪問する方法を定義します。

各アイテムに対して、ビジターは特定のチェックを実行します。たとえば、
関数宣言を訪問する際、`AstValidator` は関数が以下を持つことをチェックします：

* `u16::MAX` 以下のパラメータ；
* c-variadic 引数が宣言の最後に来る；
* ドキュメントコメントが関数パラメータに適用されていない；
* その他の検証。
