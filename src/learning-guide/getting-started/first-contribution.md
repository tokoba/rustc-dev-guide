# 最初の貢献

このセクションでは、実際にRustコンパイラリポジトリに貢献するための具体的な手順を学びます。理論だけでなく、実践的な経験を積むことが重要です。

## 貢献の種類

### 初心者におすすめの貢献

#### 1. ドキュメントの改善

- **タイポの修正**: スペルミスや文法ミスの修正
- **説明の明確化**: 分かりにくい箇所の説明を改善
- **例の追加**: コード例や使用例の追加
- **翻訳**: 英語ドキュメントの日本語訳

#### 2. 簡単なバグ修正

- **コンパイルエラー**: 簡単なコンパイルエラーの修正
- **テストの修正**: 失敗しているテストの修正
- **警告の修正**: コンパイラ警告の修正

#### 3. テストの追加

- **回帰テスト**: 既知のバグの再現テスト
- **カバレッジ向上**: 未テスト部分のテスト追加
- **エッジケース**: 境界値や特殊ケースのテスト

#### 4. 診断メッセージの改善

- **エラーメッセージ**: 分かりにくいエラーメッセージの改善
- **ヘルプメッセージ**: エラー時のヒントの追加
- **警告メッセージ**: 警告メッセージの改善

### 貢献の難易度レベル

| レベル | 内容 | 推奨時間 |
|--------|------|----------|
| 初級 | タイポ修正、簡単なドキュメント改善 | 1-2時間 |
| 初中級 | 簡単なバグ修正、テスト追加 | 3-5時間 |
| 中級 | 診断メッセージ改善、小規模な機能追加 | 5-10時間 |
| 上級 | 新機能実装、大規模なリファクタリング | 10時間以上 |

## 貢献の準備

### GitHubアカウントの設定

1. **GitHubアカウント作成**: まだない場合は作成
2. **SSHキーの設定**: 安全な接続のためのSSHキー設定
3. **Gitの設定**: ユーザー名とメールアドレスの設定

```bash
# Gitのユーザー情報を設定
git config --global user.name "あなたの名前"
git config --global user.email "あなたのメールアドレス"

# SSHキーの確認
ssh -T git@github.com
```

### 開発環境の構築

#### 1. ソースコードの取得

```bash
# rustcリポジトリをクローン
git clone https://github.com/rust-lang/rust.git
cd rust

# サブモジュールの初期化
git submodule update --init
```

#### 2. 依存関係のインストール

```bash
# 必要なツールのインストール（Ubuntu/Debianの場合）
sudo apt-get install build-essential cmake python3

# Rustの最新ナイトリー版のインストール
rustup update nightly
rustup default nightly
```

#### 3. 初回ビルド

```bash
# 初回ビルド（時間がかかります）
./x.py build

# または、より高速なビルド
./x.py build --stage 1
```

### コミュニケーションツールの準備

#### Zulipチャット

- [アカウント作成](https://rust-lang.zulipchat.com/)
- [t-compiler/help](https://rust-lang.zulipchat.com/#narrow/stream/182449-t-compiler.2Fhelp)に参加
- 質問や進捗報告に活用

## 貢献のワークフロー

### 1. 適切なissueの選択

#### 良い初級者向けissueの特徴

- **E-easy**ラベルが付いている
- **good first issue**ラベルが付いている
- **明確な説明**: 何をすべきかが明確
- **独立した問題**: 他の複雑な問題に依存しない

#### issueの探し方

1. [GitHub Issues](https://github.com/rust-lang/rust/issues)で検索
2. ラベルでフィルタリング: `E-easy`, `good first issue`
3. キーワード検索: `documentation`, `typo`, `test`

### 2. ブランチの作成

```bash
# 最新のmainブランチを取得
git checkout main
git pull upstream main

# 新しいブランチを作成
git checkout -b fix-issue-12345
```

### 3. 変更の実装

#### 変更の基本原則

- **最小限の変更**: 問題解決に必要な最小限の変更
- **一貫性**: 既存のコードスタイルに従う
- **テスト**: 変更に対応するテストを追加
- **ドキュメント**: 必要に応じてドキュメントを更新

#### コードの例：タイポ修正

```rust
// 修正前
/// This function calulates the result
fn calculate() -> i32 {
    // ...
}

// 修正後
/// This function calculates the result
fn calculate() -> i32 {
    // ...
}
```

### 4. テストの実行

```bash
# 関連するテストを実行
./x.py test --stage 1 tests/ui

# 特定のテストを実行
./x.py test --stage 1 tests/ui/issue-12345.rs

# フォーマットチェック
./x.py fmt

# clippyチェック
./x.py clippy --stage 1
```

### 5. プルリクエストの作成

#### プルリクエストの基本構造

```markdown
Fix #12345: タイポの修正

### 変更内容
- `src/libcore/foo.rs`のスペルミスを修正
- 関連するテストを追加

### テスト
- [x] 新しいテストが追加され、パスすることを確認
- [x] 既存のテストがすべてパスすることを確認

### チェックリスト
- [x] コードがrustfmtでフォーマットされている
- [x] clippyの警告がない
- [x] 必要に応じてドキュメントを更新
```

### 6. レビュー対応

#### レビュープロセス

1. **自動チェック**: CI（継続的インテグレーション）の実行
2. **コードレビュー**: コミュニティメンバーによるレビュー
3. **フィードバック対応**: 指摘された問題の修正
4. **承認とマージ**: レビュー承認後のマージ

#### 効果的なレビュー対応

- **感謝**: レビューアーの時間と労力に感謝
- **迅速な対応**: フィードバックに迅速に対応
- **質問**: 分からない点は積極的に質問
- **学習**: レビューから学ぶ姿勢

## 実践：簡単な貢献

### タイプミスの修正

#### ステップ1: タイポの探し方

```bash
# リポジトリ内で一般的なタイポを検索
git grep "calulate"  # "calculate"のスペルミス
git grep "occured"   # "occurred"のスペルミス
```

#### ステップ2: 修正とテスト

```bash
# 該当ファイルを修正
vim src/libcore/foo.rs

# テストを実行
./x.py test --stage 1

# フォーマットチェック
./x.py fmt
```

#### ステップ3: プルリクエストの作成

```bash
# 変更をコミット
git add src/libcore/foo.rs
git commit -m "Fix typo: calulate -> calculate"

# ブランチをプッシュ
git push origin fix-typo-calculate

# GitHubでプルリクエストを作成
```

### ドキュメントの改善

#### ステップ1: 改善点の特定

- 分かりにくい説明の探査
- 古い情報の更新
- コード例の追加

#### ステップ2: 改善の実装

```markdown
<!-- 改善前 -->
This function does something.

<!-- 改善後 -->
This function calculates the factorial of a given number.

# Example
```rust
let result = factorial(5); // Returns 120
```

```

### 簡単なテストの追加

#### ステップ1: テストケースの作成
```rust
// tests/ui/issue-12345.rs
fn main() {
    // テストしたいコード
    let x = 5;
    let y = x + 3;
    assert_eq!(y, 8);
}
```

#### ステップ2: 期待されるエラーの指定

```rust
// tests/ui/issue-12345.stderr
error[E0382]: borrow of moved value
 --> tests/ui/issue-12345.rs:4:9
  |
3 |     let y = x;
  |         - value moved here
4 |     println!("{}", x);
  |                 ^ value borrowed here after move
```

## レビュープロセス

### レビューアーの期待

#### 技術的側面

- **正確性**: コードが正しく動作すること
- **効率性**: 効率的な実装であること
- **保守性**: 将来の保守が容易であること
- **一貫性**: 既存のコードスタイルに従っていること

#### 非技術的側面

- **明確性**: コードの意図が明確であること
- **文書化**: 必要なドキュメントが提供されていること
- **テスト**: 適切なテストが提供されていること

### フィードバックへの対応

#### 建設的な対応

1. **理解**: フィードバックを正しく理解する
2. **感謝**: レビューアーの時間と労力に感謝する
3. **議論**: 異なる意見については建設的に議論する
4. **学習**: フィードバックから学ぶ姿勢を持つ

#### 効果的なコミュニケーション

```markdown
レビューありがとうございます！

ご指摘の点について、以下のように対応しました：
- 問題1: 〇〇を修正しました
- 問題2: 〇〇について議論させてください

背景として、〇〇という理由でこの実装にしました。
```

## 関連ドキュメント

より詳細な情報については、以下のドキュメントを参照してください：

- [貢献手順](../../contributing.md) - 詳細な貢献手順
- [Gitの使用](../../git.md) - Gitの使用方法
- [ウォークスルー：典型的な貢献](../../walkthrough.md) - 貢献の具体例
- [新しい言語機能の実装](../../implementing_new_features.md) - 機能実装のガイド
- [コンパイラチームについて](../../compiler-team.md) - チームの組織構造

## 次のステップ

最初の貢献を完了したら、次は[学習リソース](./resources.md)を参考に、さらに高度な学習に進みましょう。コミュニティとの交流を深め、より複雑な貢献に挑戦することをお勧めします。

## 成功事例

多くの開発者が初級者としてrustcに貢献を始め、現在では中核的な貢献者となっています。あなたもその一員になることができます！

### 成功への鍵

- **継続性**: 定期的に貢献を続ける
- **学習姿勢**: 常に学ぶ姿勢を持つ
- **コミュニティ参加**: 積極的にコミュニティに参加する
- **忍耐力**: 複雑な問題にも忍耐強く取り組む

---

それでは、実際に貢献を始めてみましょう！まずは簡単なissueから挑戦してみてください。
