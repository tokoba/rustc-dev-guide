# Crater

[Crater](https://github.com/rust-lang/crater)は、[crates.io](https://crates.io)上の_すべての_クレート（およびGitHub上のいくつか）のテストをコンパイルして実行するためのツールです。主に、潜在的に破壊的な変更を実装するときの破壊の範囲をチェックしたり、ベータコンパイラバージョンと安定コンパイラバージョンを実行して破壊がないことを確認したりするために使用されます。

## Craterを実行するタイミング

PRがコンパイラに大きな変更を加える場合、または破壊を引き起こす可能性がある場合は、Crater実行をリクエストする必要があります。確信が持てない場合は、PRのレビュアーに気軽に尋ねてください。

## Crater実行のリクエスト

Rustチームは、PRによって導入された変更に対してCrater実行に使用できるいくつかのマシンを維持しています。PRにCrater実行が必要な場合は、PRスレッドでトリアージチームにコメントを残してください。「チェックのみ」のCrater実行、「ビルドのみ」のCrater実行、または「ビルドとテスト」のCrater実行が必要かどうかをチームに知らせてください。違いは主に時間です。確信が持てない場合は、ビルドとテストの実行を選択してください。コンパイル時にのみ効果がある変更を加える場合（例：新しいトレイトの実装）、チェック実行のみが必要です。

PRはトリアージチームによってキューに入れられ、準備ができたら結果が投稿されます。チェック実行には約3〜4日かかり、他の2つは平均5〜6日かかります。

Craterは非常に役立ちますが、いくつかの注意点に注意することも重要です：

- すべてのコードがcrates.io上にあるわけではありません！GitHubや他の場所にあるリポジトリにはたくさんのコードがあります。また、企業はコードを公開したくない場合があります。したがって、Crater実行が成功しても破壊がないという意味ではありません。それでも注意する必要があります。

- Craterはx86_64上のLinuxビルドのみを実行します。したがって、他のアーキテクチャとプラットフォームはテストされません。重要なことに、これにはWindowsが含まれます。

- 多くのクレートはテストされていません。これには、クレートがもはやコンパイルされない（例：古いnightly機能を使用した）、テストが壊れているまたは不安定である、ネットワークアクセスが必要である、その他の理由など、多くの理由が考えられます。

- Craterを実行する前に、`@bors try`がアーティファクトのビルドに成功する必要があります。これは、コードがコンパイルされない場合、Craterを実行できないことを意味します。
